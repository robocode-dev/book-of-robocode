<svg xmlns="http://www.w3.org/2000/svg" width="600" height="400" viewBox="0 0 600 400">

    <use href="#coordinate-system" x="0" y="0" />
    <use href="#tank" x="260" y="150"/>

    <style>
        .text { fill: black; font-family: Helvetica; font-size: 14px; text-anchor: middle; }
    </style>

    <defs>
        <!-- Grid pattern (10x10 cells) -->
        <pattern id="gridPattern" x="0" y="0" width="10" height="10" patternUnits="userSpaceOnUse">
            <line x1="10" y1="0" x2="10" y2="10" stroke="#e5e7eb" stroke-width="1" />
            <line x1="0" y1="10" x2="10" y2="10" stroke="#e5e7eb" stroke-width="1" />
        </pattern>

        <!-- Arrowhead marker -->
        <marker id="arrow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
            <path d="M 0 0 L 10 5 L 0 10 z" fill="#111827" />
        </marker>

        <!-- Coordinate system symbol: reference with <use href="#coordinate-system" /> -->
        <symbol id="coordinate-system" viewBox="0 0 600 400">
            <!-- Background -->
            <rect x="0" y="0" width="600" height="400" fill="#ffffff" />

            <!-- Battlefield area with grid fill -->
            <rect x="50" y="30" width="518" height="330" fill="url(#gridPattern)" />

            <!-- Battlefield border: only left and bottom (no top, no right) -->
            <line x1="50" y1="20" x2="50" y2="350" stroke="#111827" stroke-width="2" />

            <!-- Axes -->
            <line x1="50" y1="360" x2="580" y2="360" stroke="#111827" stroke-width="2" marker-end="url(#arrow)" />
            <line x1="50" y1="360" x2="50" y2="20" stroke="#111827" stroke-width="2" marker-end="url(#arrow)" />

            <!-- Origin label -->
            <circle cx="50" cy="360" r="5" fill="#ef4444" />
            <text x="75" y="350" class="text">(0, 0)</text>

            <!-- Axis labels -->
            <text x="560" y="380" class="text" text-anchor="end">X (right)</text>
            <text x="24" y="25" class="text" text-anchor="end">Y (up)</text>

            <!-- Title / caption -->
            <text x="300" y="390" class="text" text-anchor="middle">
                Battlefield coordinate system: origin at bottom-left
            </text>
        </symbol>
    </defs>

    <defs>
        <symbol id="link0">
            <rect x="0.5" y="5.5" width="12.5" height="2.5" fill="#aaaaaa"/>
            <rect x="1" y="7" width="11.6" height="3.5" fill="#666666" rx="1" ry="1"/>
            <rect x="0.5" y="5.5" width="12.5" height="5" fill="none" stroke="black" stroke-width="1" rx="1" ry="1"/>
        </symbol>

        <symbol id="link30">
            <rect x="0.5" y="5.5" width="12.5" height="2.5" fill="#939393"/>
            <rect x="1" y="7" width="11.6" height="3" fill="#585858" rx="1" ry="1"/>
            <rect x="0.5" y="5.5" width="12.5" height="4.2" fill="none" stroke="black" stroke-width="1" rx="1" ry="1"/>
        </symbol>

        <symbol id="link60">
            <rect x="0.5" y="5.5" width="12.5" height="2" fill="#555555"/>
            <rect x="0.5" y="5.5" width="12.5" height="2" fill="none" stroke="black" stroke-width="1" rx="1" ry="1"/>
        </symbol>

        <symbol id="main-track">
            <rect x="2" y="7.5" width="9.5" height="45" fill="#333333" stroke="black" stroke-width="1"/>
        </symbol>

        <symbol id="track2">
            <use href="#main-track" x="0" y="0"/>
            <use href="#link60" x="0" y="0"/>
            <use href="#link0" x="0" y="3.3"/>
            <use href="#link0" x="0" y="11.3"/>
            <use href="#link0" x="0" y="19.3"/>
            <use href="#link0" x="0" y="27.3"/>
            <use href="#link0" x="0" y="35.3"/>
            <use href="#link0" x="0" y="43.3"/>
        </symbol>

        <symbol id="track3">
            <use href="#main-track" x="0" y="0"/>
            <use href="#link0" x="0" y="0.7"/>
            <use href="#link0" x="0" y="8.7"/>
            <use href="#link0" x="0" y="16.7"/>
            <use href="#link0" x="0" y="24.7"/>
            <use href="#link0" x="0" y="32.7"/>
            <use href="#link0" x="0" y="40.7"/>
            <use href="#link60" x="0" y="47"/>
        </symbol>

        <symbol id="body">
            <use href="#track2" x="15" y="10"/>
            <use href="#track3" x="51.5" y="10"/>

            <rect x="24" y="19" width="32" height="42" fill="#019" stroke="black" stroke-width="2" rx="1"
                  ry="1"/>
            <rect x="25" y="52" width="30" height="8" fill="black" opacity="0.5"/>
        </symbol>

        <symbol id="turret">
            <rect x="30" y="32" width="20" height="20" fill="#06C" stroke="black" stroke-width="2" rx="1"
                  ry="1"/>
            <rect x="31" y="46" width="18" height="5" fill="black" opacity="0.5"/>

            <rect x="36" y="24" width="8" height="8" fill="url(#cannon-grad)" stroke="black" stroke-width="2"/>
            <rect x="37.5" y="7" width="5" height="17" fill="url(#cannon-grad)" stroke="black" stroke-width="2"/>

            <linearGradient id="cannon-grad" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#333"/>
                <stop offset="50%" stop-color="#CCC"/>
                <stop offset="100%" stop-color="#333"/>
            </linearGradient>
        </symbol>

        <symbol id="radar">
            <circle cx="40" cy="40" r="3" fill="#AAF" stroke="black" stroke-width="2"/>
            <path d="M 29 42 q 11 10 22 0 z" fill="#AAF" stroke="black" stroke-width="2"/>
        </symbol>

        <symbol id="tank">
            <use href="#body" transform="rotate(54,40,40)"/>
            <use href="#turret" transform="rotate(77,40,40)"/>
            <use href="#radar" transform="rotate(421,40,40)"/>
        </symbol>
    </defs>
</svg>
